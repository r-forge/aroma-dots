Package: aroma.affymetrix
=========================

Version: 0.4.5 [2007-03-28xx]
o BUG FIX: ChipEffectGroupMerge would catch warnings (like errors)
  when create output CEL files, e.g. when getRelativePath() gave
  an unimportant warning.
o BUG FIX: getFitUnitFunction() for CnPlm was broken for PM-MM 
  probe models for single group units, e.g. AFFX units, resulting 
  in an error "Argument 'y' must have two dimensions: 3".

Version: 0.4.4 [2007-03-26]
o Added BackgroundCorrection classes RmaBackgroundCorrection,
  GcRmaBackgroundCorrection, and OpticalBackgroundCorrection.  
  These replaces methods bgAdjustRma(), bgAdjustRcRma(), and
  bgAdjustOptical() which are now deprecated.
o The ArrayExplorer class now handles multiple chip types.
o Now inferParameters() of the ChipEffectSet classes is looking
  at the 'intensity' (==theta) field instead of 'stdvs'.  The 
  reason for this is that 'stdvs' might be all zeros, e.g. after
  a fragment-length normalization.
o BUG FIX: clearCache() of AffymetrixCelSet did not clear the 
  .readUnitsCache field.

WORK IN PROGRESS (no guarantees):
o Added AffymetrixCelSetTuple.
o Added the SpatialReporter class.
o Added the abstract Explorer class.
o Added calculateBaseline() to ChipEffectSet.
o Replaced all occurances of affxparser::copyCel() with createFrom()
  in AffymetrixCelFile.
o Lines of code: grep -v "#" *.R | wc -l => 24902


Version: 0.4.3 [2007-03-15]
o Updated the GladModel to only work with chromosome indices (integers).
o Now the GladModel infers the set of possible chromosomes from the
  GenomeInformation file.  This means it handles other genomes than
  the human genome better.
o Updated GenomeInformation to return chromosomes as indices and never
  with 'X' and 'Y' regardless of source.  This is part of a moving the
  package to handle chromosomes as indices so that it will work with
  any genome not just the human.
o Fixed fit() for FirmaModel so that it checks array-by-array
  whether units have been fitted.
o Names of cache files are now made more consistent between
  R versions (and platforms) resulting in more cache hits 
  and therefore faster processing.
o Now the package tries to keep the search path of packages in
  such an order that any package known to cause problems to
  aroma.affymetrix if loaded after aroma.affymetrix, will be
  inserted behind aroma.affymetrix in the search path. For example,
  loading the EBImage package after aroma.affymetrix used to cause
  complaints when calling display() on an ArrayExplorer.
o Replaced argument 'moreCells' with 'ram' and removed argument
  'cellsPerChunk' in getAverageFile() of AffymetrixCelSet.
o BUG FIX: getAverageFile() of AffymetrixCelSet would average the wrong
  set of cells if argument 'indices' was different from NULL.
o BUG FIX: Argument '...' to plotDensity() of AffymetrixCelFile and
  AffymetrixCelSet are no longer passed to identifyCells().
o BUG FIX: calculateResiduals() of ProbeLevelModel would give 
  non-zero residuals for cells not fitted by the PLM. 
o BUG FIX: plotNuse() and plotRle() did not handle outliers
  correctly.
o BUG FIX: Changed default filenames for FIRMA scores to 
  "%s,FIRMAscores.CEL" rather than "%s,FIRMAresults.CEL" for 
  consistency with FirmaModel.
o BUG FIX: extractSnpQSet() would give "Error: object "cleancdfname"
  not found" if the 'affy' package was not loaded.
o BUG FIX: getCellIndices() in CnChipEffectFile would give 
  "Error in fcn(.subset2(unit, "groups"), ...) : object "odds"
  not found" for units with other than 1, 2, or 4 groups.
o MEMORY OPTIMIZATION: Further optimized memory usage in:
  calculateResiduals() of ProbeLevelModel.
o Lines of code: grep -v "#" *.R | wc -l => 24106

WORK IN PROGRESS (no guarantees):
o Added getUnitGroupCellMap() to AffymetrixCdfFile.
o Added code for in-memory attributes to AffymetrixFile object.
  Certain filename tags are interpreted as attributes which are
  set when the AffymetrixFile object is instantiated. 
  Note: Attributes are *not* carried over in transforms etc.
o Added the AromaGenomePositionFile class and subclasses
  AromaUgpFile and AromaCgpFile.
o Added extractMatrix() for ChipEffectSet.


Version: 0.4.2 [2007-02-28]
o Now patches in patches/aroma.affymetrix/<date>/ are sourced
  when the package is loaded.  To download the latest patches,
  see the package's group page.
o Added argument 'region' to getUnitsOnChromosome() of the
  GenomeInformation class.
o BUG FIX: setColorMaps() gave "Error in addColorMap.ArrayExplorer(
  this, colorMap, ...) : object "nbrOfColors" not found".
o BUG FIX: The output data set as returned by getOutputDataSet() or
  process() of QuantileNormalization lost the any CDF overridden in
  the input data set.  The only time it did pass down the CDF was
  when process() was called the first time (so that it actually
  normalized the arrays).  The fix was to make getOutputDataSet() in
  Transform to pass down the CDF too.
o BUG FIX: process() of ChromosomeExplorer would give an error saying
  'Error in file(file, ifelse(append, "a", "w")) ... cannot open file
   /*****************...'.


Version: 0.4.1 [2007-02-22]
o Fixed the warning about "'tzone' attributes are inconsistent". See
  code of as.character() for explanation.
o Now fromFiles() of AffymetrixCelSet accepts argument 'chipType' to 
  override any chip type specified in the CEL headers. This is useful
  in case different CEL files refers to different chip types, which can
  be the case for mixed generations of CEL files.  Also added a scan of 
  chip types.
o Added support for using Windows shortcuts for CDF files, that is, you
  can use a Windows Shortcut annotationData/chipTypes/Foo/Foo.cdf.lnk
  to link to annotationData/chipTypes/Bar/Bar.cdf, and whenever using
  AffymetrixCdfFile to locate the CDF for chip type 'Foo' you will get
  the CDF for chip type 'Bar', e.g. AffymetrixCdfFile$fromChipType('Foo').
o BUG FIX: calculateWeights() of ExonRmaPlm now makes sure residuals
  are calculated first.
o BUG FIX: When creating a monocell, the output did not strip of the tags
  from the chip type, e.g. annotationData/Foo,core/For,core,monocell.cdf
  instead of annotationData/Foo/For,core,monocell.cdf. 
o BUG FIX: An update to the GladModel class added to previous version
  would not recognize CEL files with same sample name but different
  tags to belong to the same sample.
o BUG FIX: calculateResiduals() would erase previously calculated
  residual files and not re-create them correctly.
o The annotation labels at the right of all graphics in the 
  ChromosomeExplorer are now made slightly larger.
o Now the table of CNRs generated by the GladModel give links
  to 'hg17' instead of 'hg18' because 'hg17' is the version of
  the dChip genome information files, which are the only one
  currently supported.
o Package passes R CMD check on R v2.4.1 (many empty help pages though).
o Lines of code: grep -v ^# *.R | wc -l => 21772

Version: 0.4.0 [2007-02-16]
o Package passes R CMD check on R v2.4.1 (many empty help pages though).
o Verified that the current version works on total copy number analysis
  for combined Nsp & Sty chips.  See the aroma.affymetrix group page
  for the example.
o Added trial version of ExonRmaPlm().
o Added trial versions of ResidualSet() and WeightSet().
o Added test for correct directory structure to fromFiles().  This will
  enforce users to use the correct structure so that for instance the
  name of the data set is correctly inferred.
o Added calculateResiduals() to ProbeLevelModel and the ResidualSet
  and ResidualFile classes.
o Now monocell CDF are names <chipType>,monocell.cdf.  Before a dash
  was used instead of a comma. This new style is more in line with
  the <name>,<tags> naming convention used elsewhere in the package.
  Note: Since there are parameter CEL files referring to the old
  <chipType>-monocell, AffymetrixCdfFile$findByChipType() will detect
  this and look for <chipType>,monocell instead. Thus, it should be
  safe to rename the monocell CDF file.
o Now any annotation file for chip type <chipType> may be located 
  under annotationData/chipTypes/<chipType>/. This directory 
  structure is preferred, because this will allow you to collect 
  all your annotation files specific to one particular chip type 
  in one place.  You may even put the in subdirectories, e.g. 
  Affymetrix/, dChip/ etc.
o From now on all reporters and explorer utilizes the root path
  reports/, and the path to an image file should be 
  reports/<dataSetName>/<tags>/<chipType>/<set>/.
  The latter subdirectory was added to avoid potential naming
  conflicts for different reporter or explorer classes.
o Remove package dir doc/.  Not used.
o Added writeChecksum() and validateChecksum() to AffymetrixFile
  to write a checksum file, which later can be validated to the
  content of the file.  This is useful to make sure that 
  transferred files have not been corrected (which happend to 
  HB while transferring via external HDD).

Version: 0.3.6 [2007-02-05]
o Added support to import dChip-exported CEL files.  See
  importFromDChip() in AffymetrixCelSet.
o Now QuantileNormalization() takes an AffymetrixCelFile as a 
  target distribution too, cf argument 'targetDistribution'.
o Now the file cache is organized into subdirectories starting
  with "aroma.affymetrix/".  This makes it easier clear the
  cache.
o Trial: Added SampleAnnotationFile class. File format is not
  settled yet.
o Trial: Removed the 4% left and right extension of xlim from the 
  plots and enforced 50px margins outside on both sides.  This 
  will make it easier to map the horizontal location in pixels 
  to megabases.  

Version: 0.3.5 [2007-01-22]
o BUG FIX: Somehow hgChromosomes.txt disappeared from the last
  versions of the package. Readded.
o Now fromChipType() of DChipGenomeInformation recognized 
  the Mapping10K_Xba142 genotype information files too, meaning
  getGenotypeInformation() of AffymetrixCdfFile will also 
  recognize it.  Same updates were done for dChip SNP 
  information files.
o Now the default sample of the ChromosomeExplorer is the first
  sample (and not the 8th, which was left in there while I was
  debugging).  The default chromosome is 1 (not 21st).

Version: 0.3.4 [2007-01-20]
o Passes R CMD check on v2.4.1.
o BUG FIX: When trying to load CDFs (and in some other cases
  too), the GLAD package (and some other packages) wer loaded
  although they are only "suggested" packages.  This was due
  to how the constructor of some classes were implemented.

Version: 0.3.3 [2007-01-17]
o Passes R CMD check on v2.4.0.
o BUG FIX: For some reason does clearCache() of Object not
  clear out all cached fields. Until I've figured out what
  is wrong, I've added explicit clearCache() to classes using
  cached fields.
o The FragmentLengthNormalization class forgot to clear cache
  after cloning input data set.  This caused the output data
  set to get the same average file as the input data set.
o Added classes QualityAssessmentModel, QualityAssessmentSet,
  and QualityAssessmentFile.
o Now createMonoCell() create the CDF in chunks, that is, 
  in constant memory.
o Now plot() of GladModel gets the default 'hgChromosomes.txt' 
  of the package if it can't be found in annotations/.
o BUG FIX: createMonoCell() of AffymetrixCdfFile would give
  an errounous mono-cell CDF file due to a recent change.

Version: 0.3.2 [2007-01-07]
o Package pass R CMD check v2.4.0.
o Tested the package from scratch analysis 19 Mapping250K_Nsp
  and 16 Mapping250K_Sty (15 in common) for total copy-number
  analysis. Steps involved: quantile normalization, RMA 
  probe-level modelling, PCR fragment-length normalization,
  and combined GLAD modelling.  This was done in WinXP Pro
  on an IBM X61 with 1.5GB RAM.  Memory usage peaked at
  approximately 1GB.
o Some optimization of what is cached in memory and what
  is cached on file.  Only for some data classes for now.
o Replaced old GladModel with new MultiGladModel, which
  is now named GladModel.
o Added AffineCnPlm for completeness.
o The ChromosomeExplorer class now generates a complete
  working ChromosomeExplorer web page.
o WORKAROUND: If 'affy' is loaded after aroma.affymetrix,
  which happens when loading 'affyPLM', affy will overload
  the generic function plotDensity() with a regular function
  breaking that method in aroma.affymetrix. The solution
  is to make sure 'affy' is always loaded before, which was done
  by adding 'affy' to 'Depends:' in DESCRIPTION.  We have the
  same problem with the 'oligo' package, which is required by
  the CrlmmModel class.  However, for now, we leave that package
  under 'Suggests:'.

Version: 0.3.2 [2007-01-06]
o Major changes.
o Renamed all Preprocessing classes to Transform classes.
o Introduced trial version of a top-level Model class in 
  order to minimize repeated code.
o Made several methods "private" in order to hide them
  form the HTML help tables.  Developers should rely on
  source code and Rdoc comments for now.

Version: 0.3.1 [2007-01-05]
o Package pass R CMD check v2.4.0 (with one warning I suspect
  is a bug in R CMD check).
o Some code was moved to 'affxparser' (v1.7.3) so it is 
  recommended to update to that as soon as it is available
  on the Bioconductor servers.
o Added initial code for PLASQ, but more is still needed.
o In addition to default "PM only" model, ProbeLevelModel:s now
  also handles "PM-MM" models.  Note that PM-MM might give a 
  non-positive value.  The multiplicate MbeiPlm handles this,
  but also the log-additive RmaPlm where such values become NAs.


Version: 0.3.0 [2006-12-20]
o Made fitGlad() for classes CnChipEffectFile and CnChipEffectSet
  deprecated.  Use the GladModel class instead.


Version: 0.3.0 [2006-12-08]
o Major updates. See below.
o Change in directory structures.  Now all probe-level data
  is outputted to probeData/, and all PLM data to plmData/.
  Data from the GladModel is stored to gladData/.  Data sets
  with the same name processed in different ways will be 
  distinguishable by their tags.
o Pre-processing methods have now been split up in two major
  classes, the ProbePreprocessing and ChipEffectPreprocessing
  (both inheriting from the Preprocessing class) to indicate
  that they operate on probe-level and chip-effect data, 
  respectively. All ProbePreprocessing classes output data 
  to the probeData/ directory, and the ChipEffectPreprocessing
  class to the plmData/ directory.
o ProbePreprocessing classes:
  QuantileNormalization replaces QuantileNormalizer. 
  AlleleCrosstalkCalibration replaces AlleleCrosstalkCalibrator.
  PcrProbeCalibration corrects for PCR effects due to oligo 
  sequence and SNP fragment lengths, cf. CRLMM.
Adapted from oligo.
o ChipEffectPreprocessing classes:
  FragmentLengthNormalization to normalize for PCR fragment-
  length effects after PLM, cf. CNAG.
o Added the PlatformDesign class which provides an interface to 
  a platform-design package without loading the package.  This
  is used for instance by the PcrProbeCalibration class.


Version: 0.2.6 [2006-12-07]
o The recently added methods below makes it possible to store
  FeatureSet data to CEL files, which will further simplify 
  bridging the aroma.affymetrix and the oligo package.
o Added protected importFeatureSet() to import probe signals
  from a single-sample oligo::FeatureSet object. 
o Added static method createBlankSet() to AffymetrixCelSet
  to create a set of blank CEL files.
o BUG FIX: The internal cache for readUnits() of ChipEffectFile 
  classes was not sensitive to neither class nor parameters
  specific to subclasses.
o Added trial version of writeWig() to CnChipEffectSet to export
  log2 copy numbers to the UCSC Genome Browser.


Version: 0.2.5 [2006-11-22]
o Package pass R CMD check.
o Added GladModel.  Now it is fairly simple to estimate total 
  copy numbers from Affymetrix 10K, 100K and 500K data sets.
o Added support for tags to most classes.
o Made encode() and decode() of ParameterCelFile approx 2-3 times
  faster by skipping the encode-/decodeUnit() step and instead
  call the encode and decode functions directly.  This will
  speed up the updating of chip-effect files about two times.
o Added R.native to the list of suggested packages. The reason
  for this is that getAverageFile() of AffymetrixCelSet is
  using rowMedians(x, na.rm) of R.native.  The version in Biobase
  does not handle missing values.  In case R.native is not
  installed, apply() and median() are used.
o Added SE estimates in RmaPlm from new affyPLM.


Version: 0.2.4 [2006-10-28]
o Added more Rdoc comments.


Version: 0.2.3 [2006-10-23]
o Added gcrma background correction.  Contributed by Ken Simpson,
  WEHI, Melbourne.
o Added extractAffyBatch() to AffymetrixCelSet extracting data
  applicable to methods in the affy package.
o Added extractSnpFeatureSet() to AffymetrixCelSet and 
  extractSnpQSet() to SnpChipEffectSet extracting data applicable 
  to methods in the oligo package.
o Added trial versions of AffymetrixSnpCdfFile, GenotypeCallFile,
  GenotypeCallSet etc.


Version: 0.2.2 [2006-09-16]
o Added basic support for dChip genome information.  It is good
  enough though to work with the 100K and 500K SNP chips.
o Package now passes R CMD check.  Some cheating were done though,
  because methods with missing Rdoc where put as \alias{}:es in
  one place.


Version: 0.2.1 [2006-09-07]
o Another big change in how classes are named.


Version: 0.2.0 [2006-08-25]
o Have done a big redesign of the package. There are now also
  some basic model fitting algorithm available.  Probe-affinity
  estimates are stored in CEL files. Soon chip effects will also
  be stored in CEL files using customized CDF files that we very
  can write using the affxparser package.


Version: 0.1.5 [2006-07-2x]
o BUG FIX: The 'outPath' argument of normalizeQuantile() in the 
  AffymetrixDataset class was not recognized.


Version: 0.1.4 [2006-07-24]
o Important breakthrough: We've update affxparser v1.5.3 with a working
  updateCel() function to update CEL v4 files.  This makes it possible
  to write normalized probe-level data as CEL files, e.g. now you can
  use normalizeQuantile(..., format="cel") to generate CEL files.  Note
  that this only works with binary CEL files (v4); ASCII CEL files (v3)
  and Calvin CEL files (upcoming binary format) is not supported.
o Now findCdf() throws an exception if CDF file is not found.


Version: 0.1.3 [2006-07-05]
o BUG FIX/WORKAROUND: Currently the affxparser code crash R if the file 
  is not a valid CEL file.  The best we can do now is to test that the
  filename has suffix *.CEL.  Thanks Ken Simpson, WEHI, Melbourne for
  pointing this out.


Version: 0.1.2 [2006-06-13]
o Made the static fromFile() and fromFiles() methods more
  generic such that it is easier to subset the different
  classes, e.g. for SNP chip classes.


Version: 0.1.1 [2006-05-30]
o Cleaned up the API and the Rd help.
o "Finalized" the quantile normalization.


Version: 0.1.0 [2006-01-11]
o Created.
